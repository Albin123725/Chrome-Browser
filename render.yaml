services:
  - type: web
    name: chrome-cloud-rdp
    env: docker
    plan: free
    dockerfilePath: ./Dockerfile
    
    # Specify the primary port (Port 80 for web access)
    port: 80
    
    # Environment variables with auto-generated passwords
    envVars:
      # Display settings
      - key: DISPLAY_WIDTH
        value: "1280"
      - key: DISPLAY_HEIGHT  
        value: "720"
      - key: DISPLAY
        value: ":99"
        
      # Security (auto-generated passwords)
      - key: VNC_PASSWORD
        generateValue: true
      - key: AUTH_USER
        value: "admin"
      - key: AUTH_PASS
        generateValue: true
        
      # Chrome optimization
      - key: CHROME_FLAGS
        value: "--no-sandbox --disable-dev-shm-usage --disable-gpu --window-size=1280,720 --start-maximized"
        
      # Features
      - key: ENABLE_NO_VNC
        value: "true"
      - key: ENABLE_AUTH
        value: "false"  # Disable auth for easier access
      - key: NO_VNC_PORT
        value: "6080"
        
      # Your Colab notebook pre-loaded
      - key: STARTUP_URL
        value: "https://colab.research.google.com/drive/1jckV8xUJSmLhhol6wZwVJzpybsimiRw1?usp=sharing"
        
    # Health check
    healthCheckPath: /health
    healthCheckTimeout: 10
    
    # Auto deployment
    autoDeploy: true
    
    # Render will expose port 80 to the internet
    # Other ports (5900, 6080) are internal only
